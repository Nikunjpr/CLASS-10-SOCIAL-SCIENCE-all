<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Social Science Master Quiz 2026</title>
<!-- Screenshot Library -->
<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
<style>
    /* --- CSS STYLES --- */
    :root {
        --primary: #2563eb; 
        --success: #16a34a;
        --danger: #dc2626;
        --dark: #1e293b;
        --light: #f8fafc;
        --gradient: linear-gradient(135deg, #4f46e5, #2563eb);
    }

    body { font-family: 'Segoe UI', sans-serif; background: #e2e8f0; margin: 0; display: flex; justify-content: center; min-height: 100vh; overflow-x: hidden; }

    .app-card {
        background: white;
        width: 100%;
        max-width: 600px;
        min-height: 100vh;
        box-shadow: 0 0 20px rgba(0,0,0,0.05);
        display: flex;
        flex-direction: column;
        position: relative;
    }

    /* HEADER */
    .header {
        background: var(--gradient);
        color: white;
        padding: 15px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: sticky;
        top: 0;
        z-index: 100;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .header h2 { margin: 0; font-size: 1.1rem; font-weight: 700; }
    .timer-badge { background: rgba(255,255,255,0.2); padding: 4px 10px; border-radius: 20px; font-weight: bold; font-size: 0.9rem; display: flex; align-items: center; gap: 5px; }

    /* PROGRESS BAR */
    .progress-container { width: 100%; height: 4px; background: #e2e8f0; }
    .progress-fill { height: 100%; background: var(--success); width: 0%; transition: width 0.3s ease; }

    /* SCREENS */
    .screen { display: none; padding: 15px; flex-grow: 1; flex-direction: column; animation: slideIn 0.3s; padding-bottom: 80px; }
    .active { display: flex; }
    @keyframes slideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    /* MENU LIST */
    .subject-header { font-size: 0.9rem; color: #64748b; font-weight: 700; margin: 15px 0 5px 0; text-transform: uppercase; letter-spacing: 1px; }
    
    .menu-item {
        background: white;
        border: 1px solid #e2e8f0;
        padding: 15px;
        margin-bottom: 10px;
        border-radius: 12px;
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-left: 5px solid var(--primary);
        box-shadow: 0 2px 5px rgba(0,0,0,0.02);
        transition: transform 0.1s;
    }
    .menu-item:active { transform: scale(0.98); background: #f1f5f9; }
    .menu-item strong { color: var(--dark); font-size: 1rem; }
    .menu-item span { font-size: 0.8rem; color: #64748b; background: #f1f5f9; padding: 3px 8px; border-radius: 6px; }

    /* QUIZ INTERFACE */
    .q-box { margin-top: 10px; }
    .q-text { font-size: 1.15rem; font-weight: 600; color: #0f172a; margin-bottom: 20px; line-height: 1.5; }
    
    .opt-btn {
        width: 100%;
        padding: 15px;
        background: white;
        border: 2px solid #e2e8f0;
        margin-bottom: 10px;
        border-radius: 10px;
        cursor: pointer;
        text-align: left;
        font-size: 1rem;
        color: #334155;
        transition: 0.2s;
        font-weight: 500;
        position: relative;
    }
    .opt-btn:active { background: #f8fafc; }
    
    .correct { background: #dcfce7 !important; border-color: var(--success) !important; color: #166534; }
    .wrong { background: #fee2e2 !important; border-color: var(--danger) !important; color: #991b1b; }
    .disabled { pointer-events: none; opacity: 0.9; }

    /* FOOTER BUTTONS */
    .footer { position: fixed; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; max-width: 600px; background: white; padding: 10px; border-top: 1px solid #e2e8f0; display: flex; gap: 10px; box-shadow: 0 -2px 10px rgba(0,0,0,0.05); }
    .btn { flex: 1; padding: 12px; border: none; border-radius: 8px; font-weight: bold; color: white; cursor: pointer; font-size: 1rem; display: flex; justify-content: center; align-items: center; gap: 5px; }
    .btn-primary { background: var(--primary); }
    .btn-danger { background: var(--danger); }
    .btn-ghost { background: #f1f5f9; color: #475569; }

    /* RESULT CARD */
    .result-area { text-align: center; padding: 20px; background: white; border-radius: 15px; border: 1px solid #e2e8f0; margin-bottom: 20px; }
    .score-big { font-size: 3rem; font-weight: 800; color: var(--primary); margin: 5px 0; }
    .stars { font-size: 1.5rem; margin: 10px 0; }

    /* SETUP SCREEN */
    .setup-box { background: white; padding: 20px; border-radius: 15px; text-align: center; border: 1px solid #e2e8f0; margin-top: 20px; }
    input[type=number] { padding: 10px; font-size: 1.2rem; width: 80px; text-align: center; border: 2px solid #cbd5e1; border-radius: 8px; margin: 10px 0; }

</style>
</head>
<body>

<div class="app-card">
    <div class="header">
        <h2 id="app-title">Social Science 2026</h2>
        <div class="timer-badge" id="timer-box" style="display:none">‚è≥ <span id="timer">00:00</span></div>
    </div>
    <div class="progress-container"><div id="progress-fill" class="progress-fill"></div></div>

    <!-- 1. CHAPTERS -->
    <div id="screen-chapters" class="screen active">
        <div id="chapter-list"></div>
    </div>

    <!-- 2. PARTS -->
    <div id="screen-parts" class="screen">
        <button class="btn btn-ghost" style="width:auto; margin-bottom:10px;" onclick="show('screen-chapters')">‚¨Ö Back</button>
        <h3 id="lbl-chapter" style="margin:0 0 15px 0; color:var(--dark);">Select Part</h3>
        <div id="part-list"></div>
    </div>

    <!-- 3. SETUP -->
    <div id="screen-setup" class="screen">
        <button class="btn btn-ghost" style="width:auto; align-self:flex-start" onclick="show('screen-parts')">‚¨Ö Back</button>
        <div class="setup-box">
            <h2 id="lbl-setup-topic" style="color:var(--primary); margin-bottom:5px;">Topic</h2>
            <p style="color:#64748b;">‡§ï‡•Å‡§≤ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®: <b id="lbl-total-q">0</b></p>
            <hr style="margin:20px 0; border:0; border-top:1px solid #e2e8f0;">
            <label>Time Limit (Minutes):</label><br>
            <input type="number" id="inp-time" value="10">
            <br><br>
            <button class="btn btn-primary" style="width:100%" onclick="startQuiz()">Start Test ‚ñ∂</button>
        </div>
    </div>

    <!-- 4. QUIZ -->
    <div id="screen-quiz" class="screen">
        <div style="display:flex; justify-content:space-between; color:#64748b; font-size:0.9rem;">
            <span id="q-counter">Q: 1/10</span>
            <span style="color:var(--success); font-weight:bold;">Auto-Next ON</span>
        </div>
        <div class="q-box">
            <div id="q-text" class="q-text">Loading...</div>
            <div id="opt-box"></div>
        </div>
    </div>

    <!-- 5. RESULT -->
    <div id="screen-result" class="screen">
        <div id="capture-area" class="result-area">
            <div style="font-size:0.9rem; font-weight:bold; color:var(--dark); text-transform:uppercase; letter-spacing:1px;">Result Card</div>
            <div id="res-topic" style="color:#64748b; font-size:0.85rem; margin-bottom:10px;">Topic Name</div>
            <div class="stars" id="lbl-stars">‚≠ê‚≠ê‚≠ê</div>
            <div class="score-big" id="lbl-percent">0%</div>
            <div id="lbl-score">0 / 0 Correct</div>
            <div style="margin-top:15px; font-size:0.75rem; color:#94a3b8;">(Test taken on Class 10 Study App)</div>
        </div>

        <div style="display:flex; gap:10px; margin-bottom:60px;">
            <button class="btn btn-ghost" onclick="retryQuiz()">üîÑ Retry</button>
            <button class="btn btn-success" id="btn-share" onclick="shareResult()">üì§ Share</button>
        </div>

        <div id="review-box" style="margin-bottom:80px;"></div>
    </div>

    <!-- QUIZ FOOTER -->
    <div id="quiz-footer" class="footer" style="display:none;">
        <button class="btn btn-ghost" onclick="nav(-1)">Prev</button>
        <button class="btn btn-danger" onclick="finishQuiz()">Submit</button>
        <button class="btn btn-primary" onclick="nav(1)">Next</button>
    </div>
    
    <!-- RESULT FOOTER -->
    <div id="result-footer" class="footer" style="display:none;">
        <button class="btn btn-primary" onclick="show('screen-chapters')">üè† Home Menu</button>
    </div>

</div>

<script>
    // ======================================================
    // üìÅ MASTER DATA (All Chapters Combined)
    // ======================================================
    const masterData = {
        // --- HISTORY ---
        "History: ‡§Ø‡•Ç‡§∞‡•ã‡§™ ‡§Æ‡•á‡§Ç ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡§µ‡§æ‡§¶": [
            {q:"‡§á‡§ü‡§≤‡•Ä ‡§§‡§•‡§æ ‡§ú‡§∞‡•ç‡§Æ‡§®‡•Ä ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§ï‡§ø‡§∏ ‡§Æ‡§π‡§æ‡§¶‡•á‡§∂ ‡§ï‡•á ‡§Ö‡§®‡•ç‡§§‡§∞‡•ç‡§ó‡§§ ‡§Ü‡§§‡•á ‡§π‡•à‡§Ç?", opt:["‡§â‡§§‡•ç‡§§‡§∞‡•Ä ‡§Ö‡§Æ‡•á‡§∞‡§ø‡§ï‡§æ","‡§¶‡§ï‡•ç‡§∑‡§ø‡§£‡•Ä ‡§Ö‡§Æ‡•á‡§∞‡§ø‡§ï‡§æ","‡§Ø‡•Ç‡§∞‡•ã‡§™","‡§™‡§∂‡•ç‡§ö‡§ø‡§Æ‡•Ä ‡§è‡§∂‡§ø‡§Ø‡§æ"], ans:2},
            {q:"‡§´‡•ç‡§∞‡§æ‡§Ç‡§∏ ‡§Æ‡•á‡§Ç ‡§ï‡§ø‡§∏ ‡§∂‡§æ‡§∏‡§® ‡§µ‡§Ç‡§∂ ‡§ï‡•Ä ‡§™‡•Å‡§®: ‡§∏‡•ç‡§•‡§æ‡§™‡§®‡§æ ‡§µ‡§ø‡§Ø‡§®‡§æ ‡§ï‡§æ‡§Ç‡§ó‡•ç‡§∞‡•á‡§∏ ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§ï‡•Ä ‡§ó‡§à ‡§•‡•Ä?", opt:["‡§π‡•à‡§™‡•ç‡§∏‡§¨‡§∞‡•ç‡§ó","‡§Ü‡§∞‡•ç‡§≤‡§ø‡§Ø‡§æ ‡§µ‡§Ç‡§∂","‡§¨‡•Ç‡§∞‡•ç‡§¨‡•ã ‡§µ‡§Ç‡§∂","‡§ú‡§æ‡§∞‡§∂‡§æ‡§π‡•Ä"], ans:2},
            {q:"‡§Æ‡•á‡§ú‡§ø‡§®‡•Ä ‡§ï‡§æ ‡§∏‡§Ç‡§¨‡§Ç‡§ß ‡§ï‡§ø‡§∏ ‡§∏‡§Ç‡§ó‡§†‡§® ‡§∏‡•á ‡§•‡§æ?", opt:["‡§≤‡§æ‡§≤ ‡§∏‡•á‡§®‡§æ","‡§ï‡§æ‡§∞‡•ç‡§¨‡•ã‡§®‡§∞‡•Ä","‡§´‡§ø‡§≤‡§ø‡§ï ‡§π‡•á‡§ü‡§æ‡§∞‡§ø‡§Ø‡§æ","‡§°‡§æ‡§Ø‡§ü"], ans:1},
            {q:"‡§á‡§ü‡§≤‡•Ä ‡§è‡§µ‡§Ç ‡§ú‡§∞‡•ç‡§Æ‡§®‡•Ä ‡§ï‡•á ‡§è‡§ï‡•Ä‡§ï‡§∞‡§£ ‡§ï‡•á ‡§µ‡§ø‡§∞‡•Å‡§¶‡•ç‡§ß ‡§®‡§ø‡§Æ‡•ç‡§® ‡§Æ‡•á‡§Ç ‡§ï‡•å‡§® ‡§•‡§æ?", opt:["‡§á‡§Ç‡§ó‡•ç‡§≤‡•à‡§£‡•ç‡§°","‡§∞‡•Ç‡§∏","‡§Ü‡§∏‡•ç‡§ü‡•ç‡§∞‡§ø‡§Ø‡§æ","‡§™‡•ç‡§∞‡§∂‡§æ"], ans:2},
            {q:"‡§ï‡§æ‡§â‡§Ç‡§ü ‡§ï‡§æ‡§¨‡•Ç‡§∞ ‡§ï‡•ã ‡§µ‡§ø‡§ï‡•ç‡§ü‡§∞ ‡§á‡§Æ‡•à‡§®‡•Å‡§è‡§≤ ‡§®‡•á ‡§ï‡§ø‡§∏ ‡§™‡§¶ ‡§™‡§∞ ‡§®‡§ø‡§Ø‡•Å‡§ï‡•ç‡§§ ‡§ï‡§ø‡§Ø‡§æ?", opt:["‡§∏‡•á‡§®‡§æ‡§™‡§§‡§ø","‡§´‡•ç‡§∞‡§æ‡§Ç‡§∏ ‡§Æ‡•á‡§Ç ‡§∞‡§æ‡§ú‡§¶‡•Ç‡§§","‡§™‡•ç‡§∞‡§ß‡§æ‡§®‡§Æ‡§Ç‡§§‡•ç‡§∞‡•Ä","‡§ó‡•É‡§π‡§Æ‡§Ç‡§§‡•ç‡§∞‡•Ä"], ans:2},
            {q:"‡§ó‡•à‡§∞‡•Ä‡§¨‡§æ‡§≤‡•ç‡§°‡•Ä ‡§™‡•á‡§∂‡•á ‡§∏‡•á ‡§ï‡•ç‡§Ø‡§æ ‡§•‡§æ?", opt:["‡§∏‡§ø‡§™‡§æ‡§π‡•Ä","‡§ï‡§ø‡§∏‡§æ‡§®","‡§ú‡§Æ‡•Ä‡§Ç‡§¶‡§æ‡§∞","‡§®‡§æ‡§µ‡§ø‡§ï"], ans:3},
            {q:"‡§ú‡§∞‡•ç‡§Æ‡§® ‡§∞‡§æ‡§á‡§® ‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§ï‡§æ ‡§®‡§ø‡§∞‡•ç‡§Æ‡§æ‡§£ ‡§ï‡§ø‡§∏‡§®‡•á ‡§ï‡§ø‡§Ø‡§æ ‡§•‡§æ?", opt:["‡§≤‡•Å‡§à 18‡§µ‡§æ‡§Å","‡§®‡•á‡§™‡•ã‡§≤‡§ø‡§Ø‡§® ‡§¨‡•ã‡§®‡§æ‡§™‡§æ‡§∞‡•ç‡§ü","‡§®‡•á‡§™‡•ã‡§≤‡§ø‡§Ø‡§®-II","‡§¨‡§ø‡§∏‡•ç‡§Æ‡§æ‡§∞‡•ç‡§ï"], ans:1},
            {q:"‡§ú‡§æ‡§≤‡§µ‡•á‡§∞‡§ø‡§® ‡§ï‡•à‡§∏‡•Ä ‡§∏‡§Ç‡§∏‡•ç‡§•‡§æ ‡§•‡•Ä?", opt:["‡§ï‡•ç‡§∞‡§æ‡§Ç‡§§‡§ø‡§ï‡§æ‡§∞‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•Ä","‡§µ‡•ç‡§Ø‡§æ‡§™‡§æ‡§∞‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•Ä","‡§µ‡§ø‡§¶‡•ç‡§µ‡§æ‡§®‡•ã‡§Ç ‡§ï‡•Ä","‡§™‡§æ‡§¶‡§∞‡•Ä ‡§è‡§µ‡§Ç ‡§∏‡§æ‡§Æ‡§Ç‡§§‡•ã‡§Ç ‡§ï‡•Ä"], ans:1},
            {q:"‡§∞‡§ï‡•ç‡§§ ‡§è‡§µ‡§Ç ‡§≤‡•å‡§π ‡§ï‡•Ä ‡§®‡•Ä‡§§‡§ø ‡§ï‡§æ ‡§Ö‡§µ‡§≤‡§Æ‡•ç‡§¨‡§® ‡§ï‡§ø‡§∏‡§®‡•á ‡§ï‡§ø‡§Ø‡§æ?", opt:["‡§Æ‡•á‡§ú‡§ø‡§®‡•Ä","‡§π‡§ø‡§ü‡§≤‡§∞","‡§¨‡§ø‡§∏‡•ç‡§Æ‡§æ‡§∞‡•ç‡§ï","‡§µ‡§ø‡§≤‡§ø‡§Ø‡§Æ-I"], ans:2},
            {q:"‡§´‡•ç‡§∞‡•à‡§Ç‡§ï‡§´‡§∞‡•ç‡§ü ‡§ï‡•Ä ‡§∏‡§Ç‡§ß‡§ø ‡§ï‡§¨ ‡§π‡•Å‡§à?", opt:["1864 ‡§à‡•¶","1866 ‡§à‡•¶","1870 ‡§à‡•¶","1871 ‡§à‡•¶"], ans:3}
            // ... (Add remaining 43 questions here from previous history chat)
        ],
        "History: ‡§≠‡§æ‡§∞‡§§ ‡§Æ‡•á‡§Ç ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡§µ‡§æ‡§¶": [
            {q:"‡§ó‡§æ‡§Å‡§ß‡•Ä‡§ú‡•Ä ‡§®‡•á ‡§¶‡§æ‡§Ç‡§°‡•Ä ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ‡§ï‡§ø‡§∏ ‡§§‡§ø‡§•‡§ø ‡§ï‡•ã ‡§Ü‡§∞‡§Ç‡§≠ ‡§ï‡•Ä?", opt:["12 ‡§ú‡§®‡§µ‡§∞‡•Ä 1930","12 ‡§´‡§∞‡§µ‡§∞‡•Ä 1930","12 ‡§Æ‡§æ‡§∞‡•ç‡§ö 1930","12 ‡§Ö‡§™‡•ç‡§∞‡•à‡§≤ 1930"], ans:2},
            {q:"‡§ó‡§æ‡§Å‡§ß‡•Ä‡§ú‡•Ä ‡§®‡•á ‡§Ö‡§∏‡§π‡§Ø‡•ã‡§ó ‡§Ü‡§Ç‡§¶‡•ã‡§≤‡§® ‡§ï‡•Ä ‡§∂‡•Å‡§∞‡•Å‡§Ü‡§§ ‡§ï‡§¨ ‡§ï‡•Ä?", opt:["1 ‡§Æ‡§æ‡§∞‡•ç‡§ö 1920","1 ‡§Æ‡§à 1920","1 ‡§Ö‡§ó‡§∏‡•ç‡§§ 1920","1 ‡§¶‡§ø‡§∏‡§Æ‡•ç‡§¨‡§∞ 1920"], ans:2},
            {q:"‡§∞‡§Æ‡•ç‡§™‡§æ ‡§µ‡§ø‡§¶‡•ç‡§∞‡•ã‡§π ‡§ï‡§¨ ‡§π‡•Å‡§Ü ‡§•‡§æ?", opt:["1916","1917","1918","1919"], ans:0}
            // ... (Add remaining 42 questions here)
        ],
        "History: ‡§∂‡§π‡§∞‡•Ä‡§ï‡§∞‡§£ ‡§î‡§∞ ‡§∂‡§π‡§∞‡•Ä ‡§ú‡•Ä‡§µ‡§®": [
            {q:"‚Äò‡§ó‡§æ‡§∞‡•ç‡§°‡§® ‡§∏‡•Ä‡§ü‡•Ä‚Äô ‡§ï‡•Ä ‡§Ö‡§µ‡§ß‡§æ‡§∞‡§£‡§æ ‡§ï‡§ø‡§∏‡§®‡•á ‡§µ‡§ø‡§ï‡§∏‡§ø‡§§ ‡§ï‡•Ä ‡§•‡•Ä?", opt:["‡§è‡§¨‡•á‡§®‡•á‡§ú‡§∞ ‡§π‡§æ‡§µ‡§∞‡•ç‡§°","‡§µ‡§ø‡§≤‡§ø‡§Ø‡§Æ","‡§®‡•á‡§™‡•ã‡§≤‡§ø‡§Ø‡§® III","‡§π‡•â‡§∏‡§Æ‡§æ‡§®"], ans:0},
            {q:"‡§≤‡§Ç‡§¶‡§® ‡§Æ‡•á‡§Ç ‡§Ö‡§®‡§ø‡§µ‡§æ‡§∞‡•ç‡§Ø ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ ‡§ï‡§¨ ‡§≤‡§æ‡§ó‡•Ç ‡§π‡§à?", opt:["1850","1855","1860","1870"], ans:3},
            {q:"‡§™‡•Ç‡§Å‡§ú‡•Ä‡§™‡§§‡§ø ‡§µ‡§∞‡•ç‡§ó ‡§ï‡•á ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§ï‡§ø‡§∏ ‡§µ‡§∞‡•ç‡§ó ‡§ï‡§æ ‡§∂‡•ã‡§∑‡§£ ‡§π‡•Å‡§Ü?", opt:["‡§∂‡•ç‡§∞‡§Æ‡§ø‡§ï ‡§µ‡§∞‡•ç‡§ó","‡§Æ‡§ß‡•ç‡§Ø‡§Æ ‡§µ‡§∞‡•ç‡§ó","‡§ï‡•É‡§∑‡§ï ‡§µ‡§∞‡•ç‡§ó","‡§Ø‡•á ‡§∏‡§≠‡•Ä"], ans:0}
            // ... (Add remaining questions)
        ],
        "History: ‡§µ‡•ç‡§Ø‡§æ‡§™‡§æ‡§∞ ‡§î‡§∞ ‡§≠‡•Ç‡§Æ‡§Ç‡§°‡§≤‡•Ä‡§ï‡§∞‡§£": [
            {q:"‡§≠‡•Ç‡§Æ‡§Ç‡§°‡§≤‡•Ä‡§ï‡§∞‡§£ ‡§ï‡•Ä ‡§∂‡•Å‡§∞‡•Å‡§Ü‡§§ ‡§ï‡§ø‡§∏ ‡§¶‡§∂‡§ï ‡§Æ‡•á‡§Ç ‡§π‡•Å‡§à?", opt:["1990 ‡§ï‡•á ‡§¶‡§∂‡§ï ‡§Æ‡•á‡§Ç","1970 ‡§ï‡•á ‡§¶‡§∂‡§ï ‡§Æ‡•á‡§Ç","1960 ‡§ï‡•á ‡§¶‡§∂‡§ï ‡§Æ‡•á‡§Ç","1980 ‡§ï‡•á ‡§¶‡§∂‡§ï ‡§Æ‡•á‡§Ç"], ans:0},
            {q:"‡§ó‡§ø‡§∞‡§Æ‡§ø‡§ü‡§ø‡§Ø‡§æ ‡§ï‡§ø‡§∏‡•á ‡§ï‡§π‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à?", opt:["‡§Ö‡§®‡•Å‡§¨‡§Ç‡§ß‡§ø‡§§ ‡§Æ‡§ú‡§¶‡•Ç‡§∞ ‡§ï‡•ã","‡§∞‡•ã‡§ó‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã","‡§õ‡§ø‡§™‡§ï‡§≤‡•Ä ‡§ï‡•ã","‡§Ö‡§Ç‡§ó‡•ç‡§∞‡•á‡§ú‡•ã‡§Ç ‡§ï‡•ã"], ans:0},
            {q:"‡§µ‡§ø‡§∂‡•ç‡§µ‡§µ‡•ç‡§Ø‡§æ‡§™‡•Ä ‡§Ü‡§∞‡•ç‡§•‡§ø‡§ï ‡§∏‡§Ç‡§ï‡§ü ‡§ï‡§ø‡§∏ ‡§µ‡§∞‡•ç‡§∑ ‡§Ü‡§∞‡§Ç‡§≠ ‡§π‡•Å‡§Ü ‡§•‡§æ?", opt:["1914","1922","1929","1927"], ans:2}
            // ... (Add remaining questions)
        ],
        
        // --- CIVICS ---
        "Civics: ‡§≤‡•ã‡§ï‡§§‡§Ç‡§§‡•ç‡§∞ ‡§Æ‡•á‡§Ç ‡§∏‡§§‡•ç‡§§‡§æ ‡§ï‡•Ä ‡§∏‡§æ‡§ù‡•á‡§¶‡§æ‡§∞‡•Ä": [
            {q:"‡§≠‡§æ‡§∞‡§§ ‡§Æ‡•á‡§Ç ‡§ï‡§π‡§æ‡§Å ‡§î‡§∞‡§§‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü‡§∞‡§ï‡•ç‡§∑‡§£ ‡§ï‡•Ä ‡§µ‡•ç‡§Ø‡§µ‡§∏‡•ç‡§•‡§æ ‡§π‡•à?", opt:["‡§≤‡•ã‡§ï‡§∏‡§≠‡§æ","‡§µ‡§ø‡§ß‡§æ‡§®‡§∏‡§≠‡§æ","‡§Æ‡§Ç‡§§‡•ç‡§∞‡§ø‡§Æ‡§Ç‡§°‡§≤","‡§™‡§Ç‡§ö‡§æ‡§Ø‡§§‡•Ä ‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§∏‡§Ç‡§∏‡•ç‡§•‡§æ‡§è‡§Å"], ans:3},
            {q:"‡§¨‡•á‡§≤‡•ç‡§ú‡§ø‡§Ø‡§Æ ‡§ï‡•á ‡§ï‡§ø‡§∏ ‡§∂‡§π‡§∞ ‡§ï‡•á ‡§∏‡•ç‡§ï‡•Ç‡§≤‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§´‡•ç‡§∞‡•á‡§Ç‡§ö ‡§¨‡•ã‡§≤‡§®‡•á ‡§™‡§∞ ‡§∞‡•ã‡§ï ‡§≤‡§ó‡§æ ‡§¶‡•Ä ‡§ó‡§à ‡§π‡•à‡§Ç?", opt:["‡§µ‡•á‡§≤‡•ã‡§®‡§ø‡§Ø‡§æ","‡§¨‡•ç‡§∞‡•Ç‡§∏‡•á‡§≤‡•ç‡§∏","‡§Æ‡§∞‡•ç‡§ö‡§ü‡•á‡§Æ","‡§Æ‡•ã‡§®‡•ç‡§∏"], ans:2},
            {q:"‡§≠‡§æ‡§∞‡§§ ‡§Æ‡•á‡§Ç ‡§∏‡§∞‡•ç‡§µ‡•ã‡§ö‡•ç‡§ö ‡§®‡•ç‡§Ø‡§æ‡§Ø‡§æ‡§≤‡§Ø ‡§ï‡•á ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§®‡•ç‡§Ø‡§æ‡§Ø‡§æ‡§ß‡•Ä‡§∂ ‡§ï‡•Ä ‡§®‡§ø‡§Ø‡•Å‡§ï‡•ç‡§§‡§ø ‡§ï‡•å‡§® ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡§Ç?", opt:["‡§™‡•ç‡§∞‡§ß‡§æ‡§®‡§Æ‡§Ç‡§§‡•ç‡§∞‡•Ä","‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡§™‡§§‡§ø","‡§∏‡§Ç‡§∏‡§¶","‡§â‡§™‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡§™‡§§‡§ø"], ans:1}
        ],
        "Civics: ‡§≤‡•ã‡§ï‡§§‡§Ç‡§§‡•ç‡§∞ ‡§Æ‡•á‡§Ç ‡§™‡•ç‡§∞‡§§‡§ø‡§∏‡•ç‡§™‡§∞‡•ç‡§ß‡§æ ‡§è‡§µ‡§Ç ‡§∏‡§Ç‡§ò‡§∞‡•ç‡§∑": [
            {q:"‚Äò‡§∏‡•Ç‡§ö‡§®‡§æ ‡§ï‡•á ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§∞ ‡§Ü‡§Ç‡§¶‡•ã‡§≤‡§®‚Äô ‡§ï‡•Ä ‡§∂‡•Å‡§∞‡•Å‡§Ü‡§§ ‡§ï‡§π‡§æ‡§Å ‡§∏‡•á ‡§π‡•Å‡§à?", opt:["‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§®","‡§¶‡§ø‡§≤‡•ç‡§≤‡•Ä","‡§§‡§Æ‡§ø‡§≤‡§®‡§æ‡§°‡•Å","‡§¨‡§ø‡§π‡§æ‡§∞"], ans:0},
            {q:"‡§ï‡§ø‡§∏ ‡§¶‡•á‡§∂ ‡§Æ‡•á‡§Ç ‡§¨‡§π‡•Å‡§¶‡§≤‡•Ä‡§Ø ‡§µ‡•ç‡§Ø‡§µ‡§∏‡•ç‡§•‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à?", opt:["‡§™‡§æ‡§ï‡§ø‡§∏‡•ç‡§§‡§æ‡§®","‡§≠‡§æ‡§∞‡§§","‡§¨‡§æ‡§Å‡§ó‡•ç‡§≤‡§æ‡§¶‡•á‡§∂","‡§¨‡•ç‡§∞‡§ø‡§ü‡•á‡§®"], ans:3},
            {q:"‡§∏‡§Æ‡•ç‡§™‡•Ç‡§∞‡•ç‡§£ ‡§≠‡§æ‡§∞‡§§ ‡§Æ‡•á‡§Ç ‡§∏‡•Ç‡§ö‡§®‡§æ ‡§ï‡§æ ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§∞ ‡§ï‡§ø‡§∏ ‡§µ‡§∞‡•ç‡§∑ ‡§≤‡§æ‡§ó‡•Ç ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ?", opt:["2005","2006","2007","2010"], ans:0}
        ],

        // --- ECONOMICS ---
        "Economics: ‡§Ö‡§∞‡•ç‡§•‡§µ‡•ç‡§Ø‡§µ‡§∏‡•ç‡§•‡§æ ‡§è‡§µ‡§Ç ‡§á‡§∏‡§ï‡•á ‡§µ‡§ø‡§ï‡§æ‡§∏": [
            {q:"‡§®‡§ø‡§Æ‡•ç‡§®‡§æ‡§Ç‡§ï‡§ø‡§§ ‡§Æ‡•á‡§Ç ‡§ï‡§ø‡§∏ ‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§ï‡•ã ‡§è‡§ï ‡§™‡§ø‡§õ‡§°‡§º‡§æ ‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§ï‡§π‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à?", opt:["‡§™‡§Ç‡§ú‡§æ‡§¨","‡§π‡§∞‡§ø‡§Ø‡§æ‡§£‡§æ","‡§ó‡§ú‡§∞‡§æ‡§§","‡§¨‡§ø‡§π‡§æ‡§∞"], ans:3},
            {q:"‡§≠‡§æ‡§∞‡§§ ‡§Æ‡•á‡§Ç ‡§®‡•Ä‡§§‡§ø ‡§Ü‡§Ø‡•ã‡§ó ‡§ï‡•Ä ‡§∏‡•ç‡§•‡§æ‡§™‡§®‡§æ ‡§π‡•Å‡§à-", opt:["1950","1951","2005","2015"], ans:3},
            {q:"‡§ï‡§ø‡§∏ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ ‡§ï‡•ã ‡§§‡•É‡§§‡•Ä‡§Ø‡§ï ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ ‡§ï‡§π‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à?", opt:["‡§∏‡•á‡§µ‡§æ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞","‡§ï‡•É‡§∑‡§ø ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞","‡§î‡§¶‡•ç‡§Ø‡•ã‡§ó‡§ø‡§ï ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞","‡§á‡§®‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§ï‡•ã‡§à ‡§®‡§π‡•Ä‡§Ç"], ans:0}
        ],
        "Economics: ‡§Æ‡•Å‡§¶‡•ç‡§∞‡§æ ‡§¨‡§ö‡§§ ‡§è‡§µ‡§Ç ‡§∏‡§æ‡§ñ": [
            {q:"‡§µ‡§ø‡§®‡§ø‡§Æ‡§Ø ‡§ï‡§æ ‡§∏‡§∞‡•ç‡§µ‡•ã‡§§‡•ç‡§§‡§Æ ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§π‡•à-", opt:["‡§µ‡§∏‡•ç‡§§‡•Å","‡§ö‡•á‡§ï","‡§Æ‡•Å‡§¶‡•ç‡§∞‡§æ","‡§™‡•ç‡§∞‡§§‡§ø‡§ú‡•ç‡§û‡§æ-‡§™‡§§‡•ç‡§∞"], ans:2},
            {q:"‡§∏‡§æ‡§ñ ‡§ï‡§æ ‡§∏‡§Ç‡§¨‡§Ç‡§ß ‡§π‡•à-", opt:["‡§ó‡§∞‡•Ä‡§¨‡•Ä ‡§∏‡•á","‡§â‡§ß‡§æ‡§∞ ‡§∏‡•á","‡§¶‡•ã‡§®‡•ã‡§Ç ‡§∏‡•á","‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§∏ ‡§∏‡•á"], ans:3},
            {q:"‡§è‡§ï ‡§ü‡•Ä‡•¶ ‡§è‡§Æ‡•¶ (ATM) ‡§ï‡§æ ‡§Ö‡§∞‡•ç‡§• ‡§π‡•à-", opt:["‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§ ‡§ü‡•á‡§≤‡§∞ ‡§Æ‡§∂‡•Ä‡§®","‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§ ‡§ü‡•â‡§ï‡§ø‡§Ç‡§ó ‡§Æ‡§∂‡•Ä‡§®","‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§ ‡§ü‡•á‡§ï‡§ø‡§Ç‡§ó ‡§Æ‡§∂‡•Ä‡§®","‡§á‡§®‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§ï‡•ã‡§à ‡§®‡§π‡•Ä‡§Ç"], ans:0}
        ],
        "Economics: ‡§π‡§Æ‡§æ‡§∞‡•Ä ‡§µ‡§ø‡§§‡•ç‡§§‡•Ä‡§Ø ‡§∏‡§Ç‡§∏‡•ç‡§•‡§æ‡§è‡§Ç": [
            {q:"‡§≠‡§æ‡§∞‡§§ ‡§ï‡•á ‡§ï‡•á‡§®‡•ç‡§¶‡•ç‡§∞‡•Ä‡§Ø ‡§¨‡•à‡§Ç‡§ï ‡§ï‡•å‡§® ‡§π‡•à?", opt:["‡§∞‡§ø‡§ú‡§∞‡•ç‡§µ ‡§¨‡•à‡§Ç‡§ï ‡§ë‡§´ ‡§á‡§Ç‡§°‡§ø‡§Ø‡§æ","‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡•Ä‡§Ø ‡§ó‡•ç‡§∞‡§æ‡§Æ‡•Ä‡§£ ‡§¨‡•à‡§Ç‡§ï","‡§∏‡•ç‡§ü‡•á‡§ü ‡§¨‡•à‡§Ç‡§ï ‡§ë‡§´ ‡§á‡§Ç‡§°‡§ø‡§Ø‡§æ","‡§™‡§Ç‡§ú‡§æ‡§¨ ‡§®‡•á‡§∂‡§®‡§≤ ‡§¨‡•à‡§Ç‡§ï"], ans:0},
            {q:"‡§≠‡§æ‡§∞‡§§ ‡§ï‡•Ä ‡§µ‡§ø‡§§‡•ç‡§§‡•Ä‡§Ø ‡§∞‡§æ‡§ú‡§ß‡§æ‡§®‡•Ä ‡§ï‡§ø‡§∏ ‡§∂‡§π‡§∞ ‡§ï‡•ã ‡§ï‡§π‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à?", opt:["‡§Æ‡•Å‡§Ç‡§¨‡§à","‡§¶‡§ø‡§≤‡•ç‡§≤‡•Ä","‡§™‡§ü‡§®‡§æ","‡§¨‡§Ç‡§ó‡§≤‡•å‡§∞"], ans:0},
            {q:"‡§¶‡•Ä‡§∞‡•ç‡§ò‡§ï‡§æ‡§≤‡•Ä‡§® ‡§ã‡§£ ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞‡§®‡•á‡§µ‡§æ‡§≤‡•Ä ‡§∏‡§Ç‡§∏‡•ç‡§•‡§æ ‡§ï‡•å‡§®-‡§∏‡•Ä ‡§π‡•à?", opt:["‡§ï‡•É‡§∑‡§ï ‡§Æ‡§π‡§æ‡§ú‡§®","‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï ‡§ï‡•É‡§∑‡§ø ‡§∏‡§æ‡§ñ ‡§∏‡§Æ‡§ø‡§§‡§ø","‡§≠‡•Ç‡§Æ‡§ø ‡§µ‡§ø‡§ï‡§æ‡§∏ ‡§¨‡•à‡§Ç‡§ï","‡§á‡§®‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§à ‡§®‡§π‡•Ä‡§Ç"], ans:2}
        ]
    };

    // ==========================================
    // ‚öôÔ∏è APP LOGIC (Automatic Parts System)
    // ==========================================
    let currentQuiz = [], userAns = [], curIdx = 0, timerRef, timeSec = 0, autoNextTimeout;
    let activeTopic = "";

    function show(id) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        
        // Handle Footer Visibility
        document.getElementById('quiz-footer').style.display = (id === 'screen-quiz') ? 'flex' : 'none';
        document.getElementById('result-footer').style.display = (id === 'screen-result') ? 'flex' : 'none';
        document.getElementById('timer-box').style.display = (id === 'screen-quiz') ? 'flex' : 'none';
        
        window.scrollTo(0,0);
    }

    function initApp() {
        const list = document.getElementById('chapter-list');
        list.innerHTML = "";
        
        const subjects = {};
        
        // Group by Subject prefix (History:, Civics:, etc.)
        Object.keys(masterData).forEach(key => {
            const [subj, title] = key.includes(':') ? key.split(':') : ['Other', key];
            if(!subjects[subj]) subjects[subj] = [];
            subjects[subj].push({ fullKey: key, title: title.trim(), count: masterData[key].length });
        });

        // Render List
        Object.keys(subjects).forEach(subj => {
            const header = document.createElement('div');
            header.className = 'subject-header';
            header.innerText = subj;
            list.appendChild(header);

            subjects[subj].forEach(item => {
                const div = document.createElement('div');
                div.className = 'menu-item';
                div.innerHTML = `<strong>${item.title}</strong><span>${item.count} Q</span>`;
                div.onclick = () => loadParts(item.fullKey, item.count);
                list.appendChild(div);
            });
        });
    }

    function loadParts(key, total) {
        activeTopic = key;
        const list = document.getElementById('part-list');
        list.innerHTML = "";
        document.getElementById('lbl-chapter').innerText = key.split(':')[1] || key;

        const partSize = 20;
        const totalParts = Math.ceil(total / partSize);

        for(let i=0; i<totalParts; i++) {
            const start = i * partSize;
            const end = Math.min((i+1) * partSize, total);
            const partName = `Part ${i+1} (Q. ${start+1} - ${end})`;
            
            const div = document.createElement('div');
            div.className = 'menu-item';
            div.style.borderLeftColor = "var(--success)";
            div.innerHTML = `<strong>${partName}</strong><span>‚ñ∂</span>`;
            div.onclick = () => setupQuiz(partName, masterData[key].slice(start, end));
            list.appendChild(div);
        }
        show('screen-parts');
    }

    function setupQuiz(partName, questions) {
        currentQuiz = questions;
        document.getElementById('lbl-setup-topic').innerText = partName;
        document.getElementById('lbl-total-q').innerText = questions.length;
        show('screen-setup');
    }

    function startQuiz() {
        const min = document.getElementById('inp-time').value;
        timeSec = min ? parseInt(min) * 60 : 0;
        userAns = new Array(currentQuiz.length).fill(null);
        curIdx = 0;
        
        clearInterval(timerRef);
        if(timeSec > 0) {
            timerRef = setInterval(() => {
                timeSec--;
                let m = Math.floor(timeSec/60);
                let s = timeSec%60;
                document.getElementById('timer').innerText = `${m}:${s<10?'0':''}${s}`;
                if(timeSec <= 0) finishQuiz();
            }, 1000);
        } else {
            document.getElementById('timer').innerText = "‚àû";
        }
        
        loadQuestion();
        show('screen-quiz');
    }

    function loadQuestion() {
        clearTimeout(autoNextTimeout);
        const data = currentQuiz[curIdx];
        document.getElementById('q-counter').innerText = `Q: ${curIdx+1}/${currentQuiz.length}`;
        document.getElementById('q-text').innerText = `${curIdx+1}. ${data.q}`;
        document.getElementById('progress-fill').style.width = `${((curIdx)/currentQuiz.length)*100}%`;
        
        const box = document.getElementById('opt-box');
        box.innerHTML = "";
        
        data.opt.forEach((txt, i) => {
            const btn = document.createElement('button');
            btn.className = 'opt-btn';
            btn.innerText = `(${String.fromCharCode(65+i)}) ${txt}`;
            
            if(userAns[curIdx] !== null) {
                btn.classList.add('disabled');
                if(i === data.ans) btn.classList.add('correct');
                else if(i === userAns[curIdx]) btn.classList.add('wrong');
            } else {
                btn.onclick = () => checkAns(i, btn);
            }
            box.appendChild(btn);
        });
    }

    function checkAns(idx, btn) {
        if(userAns[curIdx] !== null) return;
        userAns[curIdx] = idx;
        
        const correct = currentQuiz[curIdx].ans;
        const all = document.getElementById('opt-box').children;
        
        if(idx === correct) btn.classList.add('correct');
        else {
            btn.classList.add('wrong');
            all[correct].classList.add('correct');
            if(navigator.vibrate) navigator.vibrate(200);
        }
        
        Array.from(all).forEach(b => b.classList.add('disabled'));
        autoNextTimeout = setTimeout(() => { if(curIdx < currentQuiz.length-1) nav(1); }, 1500);
    }

    function nav(dir) {
        clearTimeout(autoNextTimeout);
        if(curIdx + dir >= 0 && curIdx + dir < currentQuiz.length) {
            curIdx += dir;
            loadQuestion();
        }
    }

    function finishQuiz() {
        clearInterval(timerRef);
        clearTimeout(autoNextTimeout);
        document.getElementById('progress-fill').style.width = '100%';
        
        let score = 0;
        let reviewHtml = "";
        
        userAns.forEach((u, i) => {
            const q = currentQuiz[i];
            if(u === q.ans) score++;
            else {
                reviewHtml += `
                <div style="background:#fff1f2; padding:10px; margin-bottom:10px; border-left:4px solid var(--danger); border-radius:5px;">
                    <div style="font-weight:bold; margin-bottom:5px;">Q${i+1}: ${q.q}</div>
                    <div style="color:#dc2626; font-size:0.9rem;">Your: ${u!==null?q.opt[u]:'Skipped'}</div>
                    <div style="color:#16a34a; font-size:0.9rem;">Correct: ${q.opt[q.ans]}</div>
                </div>`;
            }
        });

        const percent = Math.round((score/currentQuiz.length)*100);
        let stars = "‚≠ê";
        if(percent>=80) stars="‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê";
        else if(percent>=60) stars="‚≠ê‚≠ê‚≠ê‚≠ê";
        else if(percent>=40) stars="‚≠ê‚≠ê‚≠ê";
        else stars="‚≠ê‚≠ê";

        document.getElementById('res-topic').innerText = activeTopic;
        document.getElementById('lbl-percent').innerText = `${percent}%`;
        document.getElementById('lbl-score').innerText = `${score} / ${currentQuiz.length} Correct`;
        document.getElementById('lbl-stars').innerText = stars;
        document.getElementById('review-box').innerHTML = reviewHtml || "<div style='text-align:center; color:green'>üéâ Perfect Score!</div>";
        
        show('screen-result');
    }

    function retryQuiz() { startQuiz(); }

    function shareResult() {
        const btn = document.getElementById('btn-share');
        btn.innerText = "Processing...";
        const capture = document.getElementById('capture-area');
        
        html2canvas(capture).then(canvas => {
            canvas.toBlob(blob => {
                const file = new File([blob], "result.png", {type: "image/png"});
                const data = {
                    title: 'My Quiz Score',
                    text: `I scored ${document.getElementById('lbl-percent').innerText} in Social Science! Can you beat me?`,
                    url: window.location.href,
                    files: [file]
                };
                if(navigator.canShare && navigator.canShare(data)) {
                    navigator.share(data).catch(console.error);
                } else {
                    alert("Sharing not supported. Screenshot saved.");
                }
                btn.innerText = "üì§ Share";
            });
        });
    }

    // Start App
    initApp();

</script>
</body>
</html>
